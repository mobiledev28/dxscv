@{
    ViewBag.Title = "MultiFileSelection";
    Layout = "~/Views/Shared/_mainLayout.cshtml";
}

<script type="text/javascript">
    function onFileUploadComplete(e) {
        if (e.callbackData) {
            var fileData = e.callbackData.split('|');
            var fileName = fileData[0],
                fileUrl = fileData[1],
                fileSize = fileData[2];
            DXUploadedFilesContainer.AddFile(fileName, fileUrl, fileSize);
        }
    }
</script>

@using (Html.BeginForm("MultiFileSelection", "UploadControl", FormMethod.Post, new { @class = "multiSelection" }))
{
    <div class="uploadContainer">
        @Html.DevExpress().UploadControl(
            settings =>
            {
                settings.Name = "ucMultiSelection";
                settings.CallbackRouteValues = new { Controller = "UploadControl", Action = "MultiSelectionImageUpload" };

                settings.Width = Unit.Pixel(320);
                settings.ShowProgressPanel = true;
                settings.ShowUploadButton = true;
                settings.AdvancedModeSettings.EnableMultiSelect = true;
                settings.AdvancedModeSettings.EnableFileList = true;
                settings.AdvancedModeSettings.EnableDragAndDrop = true;
                settings.NullText = "Select multiple files...";

                settings.ValidationSettings.Assign(DXSCV.Helpers.UploadControlHelper.UploadValidationSettings);

                settings.ClientSideEvents.FilesUploadStart = "function(s,e) { DXUploadedFilesContainer.Clear(); }";
                settings.ClientSideEvents.FileUploadComplete = "function(s,e) { onFileUploadComplete(e); }";
            }).GetHtml()

        <br /><br />
        @Html.DevExpress().Label(
            settings =>
            {
                settings.Name = "AllowedFileExtensionsLabel";
                settings.Text = "Allowed file extensions: .jpg, .jpeg, .gif, .png.";
                settings.ControlStyle.Font.Size = FontUnit.Point(8);
            }).GetHtml()
        <br />
        @Html.DevExpress().Label(
            settings =>
            {
                settings.Name = "MaxFileSizeLabel";
                settings.Text = "Maximum file size: 4 MB.";
                settings.ControlStyle.Font.Size = FontUnit.Point(8);
            }).GetHtml()

    </div>
    <div>
        @Html.Partial("UploadedFilesContainer")
    </div>
    <div class="contentFooter">
        <p class="Note">
            <b>Note</b>: All files uploaded to this demo will be automatically deleted in 5 minutes.
        </p>
    </div>
}
